<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Purple Rain</title>
    <script src="lib/p5.js" type="text/javascript"></script>
    <script src="lib/p5.dom.js" type="text/javascript"></script>

    <style> body{padding: 0;margin: 0;display: -webkit-box;display: -ms-flexbox;display: flex;-webkit-box-pack: center;-ms-flex-pack: center;justify-content: center;-webkit-box-align: center;-ms-flex-align: center;align-items: center;} </style>
  </head>
  <script type="text/javascript">

// Purple Rain
// (138, 43, 226)
// (230, 230, 250) // background
var drops = [];
var rSlider, gSlider;
var cx, cy;
function setup() {
  cx = windowWidth;
  cy = windowHeight
  createCanvas(cx, cy);
  colorMode(HSB, 360, 255, 255);
  gSlider = createSlider(0, 255, 255);
  gSlider.position(10, 10);
  for (var i = 0; i < 200; i++) {
    drops[i] = new Drop();

  }
}

function draw() {
  var dg= gSlider.value();

  background(20);







  for (var i = 0; i < drops.length; i++) {
    drops[i].fall();
    stroke(dg, 255, 255);
        strokeWeight(6);
    drops[i].show();
  }
}
function Drop() {

  this.x = random(width);
  this.y = random(-500, -50);
  this.z = random(5, 10);
  this.len = map(this.z, 0, 20, 10, 20);
  this.yspeed = map(this.z, 0, 20, 1, 20);

  this.fall = function() {
    this.y = this.y + this.yspeed;
    var grav = map(this.z, 0, 20, 0, 0.2);
    this.yspeed = this.yspeed + grav;

    if (this.y > height) {
      this.y = random(-200, -100);
      this.yspeed = map(this.z, 0, 20, 4, 10);
    }
  }

  this.show = function() {
    var thick = map(this.z, 0, 20, 1, 3);
    strokeWeight(thick);
    line(this.x, this.y, this.x, this.y+this.len);
  }
}



  </script>
  <body>
  </body>
</html>